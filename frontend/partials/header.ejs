<header>
	<% sortedNews = cms.newspapers.sort((a, b) => new Date(b.date) - new Date(a.date)); if (title === sortedNews[0].title) { %>
	<div class="announcement">Latest Newspaper</div>
	<% } else { %>
	<div class="alert"><a href="<%- vars.domain %>/newspapers/<%= sortedNews[0].slug %>" title="Latest Newspaper">Latest — <%= sortedNews[0].title %></a></div>
	<br />
	<br />
	<% } %>
	<div class="socials">
		<%- include('socials.ejs') %>
	</div>
	<div class="main <% if (title === '') { %>home<% } %>">
		<a href="<%- vars.domain %>/" title="Go home" class="logo">
			<img src="<%- vars.asset_prefix %><%= cms.siteDetails[0].logo.path %>" alt="<%= cms.siteDetails[0].title %>">
			<h2><%= cms.siteDetails[0].title %></h2>
		</a>
		<div class="links">
			<%- include('links.ejs') %>
		</div>
		<div class="search" onmouseover="document.querySelector('.search').classList.add('active'); document.querySelector('.search form input').focus();" onmouseleave="document.querySelector('.search').classList.remove('active');">
			<img src="<%- vars.domain %>/images/search.svg" alt="Search">
			<form action="/search">
				<input type="text" placeholder="Search" name="query">
			</form>
		</div>
		<div class="widget active" widgetId="1">
			<h1>📅</h1>
			<div class="inner">
				<% weekday = (new Date()).toLocaleDateString('en-US', { timeZone: 'America/New_York', weekday: 'long' });
				month = (new Date()).toLocaleDateString('en-US', { timeZone: 'America/New_York', month: 'long' });
				day = parseInt((new Date()).toLocaleDateString('en-US', { timeZone: 'America/New_York', day: 'numeric' }));
				ordinal = (day === 1 || day === 21 || day === 31) ? 'st' : (day === 2 || day === 22) ? 'nd' : (day === 3 || day === 23) ? 'rd' : 'th'; 
				year = (new Date()).toLocaleDateString('en-US', { timeZone: 'America/New_York', year: 'numeric' }); %>
				<h2><%= weekday %>, <%= day %><%= ordinal %></h2>
				<h5><% if (weekday === 'Thursday') { %>Weekly Meeting @ 3:15, Rm. 213<% } else { %><%= month %> <%= year %><% } %></h5>
			</div>
		</div>
		<div class="widget" widgetId="2">
			<% var icon = '☀️';
			switch (JSON.parse(vars.weather).weather[0].icon) {
				case '01d' || '01n':
					icon = '☀️';
					break;
				case '02d' || '02n':
					icon = '🌤️';
					break;
				case '03d' || '03n':
					icon = '☁️';
					break;
				case '04d' || '04n':
					icon = '';
					break;
				case '09d' || '09n':
					icon = '🌧️';
					break;
				case '10d' || '10n':
					icon = '🌦️';
					break;
				case '11d' || '11n':
					icon = '🌩️';
					break;
				case '13d' || '13n':
					icon = '❄️';
					break;
				case '50d' || '50n':
					icon = '🌫️';
					break;
				default:
					icon = '☀️';
					break;
			} %>
			<h1><%= icon %></h1>
			<div class="inner">
				<h2><%= Math.round(((JSON.parse(vars.weather).main.temp - 273.15) * (9/5)) + 32) %>°F • <%= JSON.parse(vars.weather).weather[0].main %></h2>
				<h5>Valley Stream, NY</h5>
			</div>
		</div>
	</div>
</header>
<div class="pcontent">